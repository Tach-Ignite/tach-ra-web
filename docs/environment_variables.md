# Environment Variables

As part of the localInit.sh script, a .env.local file is created in the root of the directory. This file contains the environment variables required to run the application. For more information on environment variables for external dependencies, see [Configuring External Dependencies](/docs/configuring_external_dependencies.md).

These environment variables should not contain secrets. As a reminder, you should _store your secrets responsibly_, for example using AWS Secrets Manager or Azure Key Vault. Do not commit secrets to source control!

## Automated Deployment

All environment variables and secrets can be deployed automatically using `pnpm deploy-env-vars`. Depending on which lines are uncommented in this script, it can deploy all environment variables from `.env.local` and all secrets from `.env.secrets.local` to:

- Github
- Amplify
- SSM, with tight integration to SST automation

To run this script, you must be authenticated via SSO to AWS as an admin and be authenticated to github with admin repo permissions. See [Infrastructure](./infrastructure.md) for more details on how to authenticate.

## Environment Variables Descriptions

`NODE_ENV`: This variable is used to determine the environment the application is running in. For local development, this should be set to `development`. For production, this should be set to `production`.

`EXPOSE_ERROR_STACK`: This variable determines whether or not to expose the error stack in the response. This should be set to `true` for local development and `false` for production.

`NEXT_PUBLIC_BASE_URL`: This variable is used to determine the base url of the application. This should be set to `https://localhost:3000` for local development and `https://yourdomain.com` for production.

`TACH_MONGO_URI`: This variable is used to determine the connection string for the mongodb database.

`NEXTAUTH_URL`: This should be set to the same as `NEXT_PUBLIC_BASE_URL`. It is required by NextAuth.

`NEXTAUTH_SECRET`: A secret string used by NextAuth for encryption and hashing. This should be a randomized string.

`NEXT_PUBLIC_HOTJAR_HJID`: The hotjar id for the application.

`NEXT_PUBLIC_HOTJAR_HJSV`: The hotjar version number. At the time of writing, this is 6.

`NEXT_PUBLIC_API_URL`: The base url of the api endpoints. This should be set to `https://localhost:3000/api` for local development and `https://yourdomain.com/api` for production.

`NEXT_PUBLIC_GOOGLE_RECAPTCHA_SITE_KEY`: Included in recaptcha-protected requests to prevent spam.

`NEXT_PUBLIC_PAYPAL_CLIENT_ID`: Used by paypal to identify your associated paypal account.

`NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`: Used by stripe to identify your stripe account.

`TACH_AWS_ACCESS_KEY_ID`, `TACH_AWS_SECRET_ACCESS_KEY`, `TACH_AWS_BUCKET_NAME`, `TACH_AWS_REGION`: AWS-specific environment variables. See [AWS S3](/docs/configuring_external_dependencies.md#aws-s3) for more information.

`TACH_AZURE_AD_TENANT_ID`, `TACH_AZURE_AD_CLIENT_ID`, `TACH_AZURE_AD_CLIENT_SECRET`: Azure AD-specific environment variables. See [Azure AD](/docs/configuring_external_dependencies.md#azure-ad) for more information.

`TACH_GITHUB_CLIENT_ID`, `TACH_GITHUB_CLIENT_SECRET`: GitHub-specific environment variables. See [GitHub](/docs/configuring_external_dependencies.md#github) for more information.

`TACH_GOOGLE_CLIENT_ID`, `TACH_GOOGLE_CLIENT_SECRET`: Google-specific environment variables. See [Google](/docs/configuring_external_dependencies.md#google) for more information.

`TACH_GOOGLE_RECAPTCHA_SECRET_KEY`: Secret key to validate recaptcha tokens.

`TACH_LINKEDIN_CLIENT_ID`, `TACH_LINKEDIN_CLIENT_SECRET`: LinkedIn-specific environment variables. See [LinkedIn](/docs/configuring_external_dependencies.md#linkedin) for more information.

`TACH_NEXTAUTH_JWT_SECRET`: Used to validate JWT's generated by the application.

`TACH_PAYPAL_SECRET_KEY`: Required for Paypal api requests.

`TACH_STRIPE_SECRET_KEY`: Required for Stripe api requests.
